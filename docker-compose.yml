services:
  web:
    build: .
    container_name: ssl-licence-dashboard
    ports:
      - "5000:5000"
      - "80:80"
    volumes:
      - ./data:/app/data
    environment:
      - ACME_EMAIL=${ACME_EMAIL:-}
      - CERTBOT_STAGING=${CERTBOT_STAGING:-false}
      - AZURE_SUBSCRIPTION_ID=${AZURE_SUBSCRIPTION_ID:-}
      - AZURE_RESOURCE_GROUP=${AZURE_RESOURCE_GROUP:-}
      - AZURE_TENANT_ID=${AZURE_TENANT_ID:-}
      - AZURE_CLIENT_ID=${AZURE_CLIENT_ID:-}
      - AZURE_CLIENT_SECRET=${AZURE_CLIENT_SECRET:-}
      - FLASK_SECRET_KEY=${FLASK_SECRET_KEY:-}
      - APISIX_AUTH_ENABLED=${APISIX_AUTH_ENABLED:-false}
      - APISIX_USER_HEADER=${APISIX_USER_HEADER:-X-User-Id}
      - APISIX_ROLE_HEADER=${APISIX_ROLE_HEADER:-X-User-Role}
      - APISIX_DISPLAY_NAME_HEADER=${APISIX_DISPLAY_NAME_HEADER:-X-User-Display-Name}
    restart: unless-stopped
